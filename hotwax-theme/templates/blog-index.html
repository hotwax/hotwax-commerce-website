<!--
  templateType: blog
  isAvailableForNewContent: true
  label:  Horizon Theme - Blog Listing
-->
{% set template_css = '../../css/_blog.css' %}
{% extends "./layouts/base.html" %}

{% set arrow_icon = 
  '<svg xmlns="http://www.w3.org/2000/svg" width="8" height="16" viewBox="0 0 5 8" fill="#FFFFFF">
    <path d="M4.35355 3.64645C4.54882 3.84171 4.54882 4.15829 4.35355 4.35355L1.17157 7.53553C0.976311 7.7308 0.659728 7.7308 0.464466 7.53553C0.269204 7.34027 0.269204 7.02369 0.464466 6.82843L3.29289 4L0.464466 1.17157C0.269204 0.976311 0.269204 0.659728 0.464466 0.464466C0.659728 0.269204 0.976311 0.269204 1.17157 0.464466L4.35355 3.64645ZM3 3.5H4V4.5H3V3.5Z"/
  </svg>' 
%}

{% block body %}
<main class="body-container-wrapper">
  <div class="blog-index">
    <div class="banner">
      <div class="post-listing{% if simple_list_page %}-simple{% endif %}">
          {% for content in contents %}
              {% if loop.index <= 1 %}
              <div class="blog-banner">
                  {% if not simple_list_page %}
                      {% if content.post_list_summary_featured_image %}
                          <a class="blog-banner-image" href="{{content.absolute_url}}" title="">
                              <img src="{{ content.post_list_summary_featured_image }}" width="600px" alt="{{ content.featured_image_alt_text | escape }}">
                          </a>
                      {% endif %}
                      <div class="blog-banner-content">
                          <div class="topic-wrap">
                              <p id="hubspot-topic_data"> Blog |
                              {% for topic in content.topic_list %}
                                  <span class="topic-link" data-attr="{{ topic.name|replace(" ", "-")|replace("&", "-") }}">{{ topic.name }}</span>{% if not loop.last %}{% endif %}
                              {% endfor %}
                              </p>
                          </div>
                          <div class="title-wrap">
                              <h1><a href="{{content.absolute_url}}">{{ content.name }}</a></h1>
                          </div>
                          <div class="title-sub-wrap">
                              <h2>
                              {{ content.widgets.your_custom_modulefield.body.value }}
                              </h2>
                              <div id="hubspot-author_data" class="hubspot-editable sutor-wrap" data-hubspot-form-id="author_data" data-hubspot-name="Blog Author">
                                by
                                {%if content.blog_post_author %}
                                    <a class="author-link" href="{{ blog_author_url(group.id, content.blog_post_author.slug) }}">{{ content.blog_post_author.display_name }}</a> 
                                {% endif %}
                              </div>
                          </div>
                          <div class="more-wrap">
                              {% if content_group.show_summary_in_listing %}
                                  <a class="more-link" href="{{ content.absolute_url }}">Read More <i class="fas fa-arrow-right"></i></a>
                              {% endif %}
                          </div>
                          <div class="social-share-wrap">
                            <ul>
                            <li><a href="#" onclick="javascript:window.open('http://www.linkedin.com/shareArticle?mini=true&amp;url={{ content.absolute_url }}','popup','width=600,height=600');" target="_blank" style="width: 24px; border-width: 0px; border: 0px;" rel="noopener"> <i class="fab fa-linkedin-in"><span>share</span></i> </a></li>
                            <li><a href="https://twitter.com/intent/tweet?url={{ content.absolute_url }}" target="_blank" style="width: 24px; border-width: 0px; border: 0px;" rel="noopener"> <i class="fab fa-twitter"><span>share</span></i> </a></li>
                            <li><a  href="#" onclick="javascript:window.open('http://www.facebook.com/sharer.php?u={{ content.absolute_url }}','popup','width=657,height=400');" target="_blank" style="width: 24px; border-width: 0px; border: 0px;" rel="noopener"> <i class="fab fa-facebook-f"><span>share</span></i> </a></li>
                            <li><a href="mailto:?subject=Check out {{ content.absolute_url }}" target="_blank" style="width: 24px; border-width: 0px; border: 0px;" rel="noopener"> <img src="//static.hubspot.com/final/img/common/icons/social/email-24x24.png?width=24" class="hs-image-widget hs-image-social-sharing-24" style="max-height: 24px; max-width: 24px; border-width: 0px; border: 0px;" width="24" alt="Share on Email" hspace="0"><i class="fas fa-envelope"></i> </a></li>
                            </ul>
                          </div>

                      </div>
                  {% else %}
                  {% endif %}
              </div>
              {% endif %}
          {% endfor %}
      </div>      
    </div>
    <div class="blogs list-section page-center">
      <div class="blog-index__topic">
        {% set my_tags = blog_tags('default', 250) %}
        {% set currentURL = content.absolute_url %}
        
        <form class="blog-tag-filter">
          <div class="blog-tag-filter__select-wrapper">
            <select name="tag-select" id="tag-select" class="blog-tag-filter__select">
              <option {% if currentURL == group.absolute_url %}selected="selected"{% endif %} value="{{ group.absolute_url }}">Explore topics</option>
              {% for item in my_tags %}
                <option {% if currentURL == blog_tag_url(group.id, item.slug) %}selected="selected"{% endif %} value="{{ blog_tag_url(group.id, item.slug) }}">{{ item }}</option>
              {% endfor %}
            </select>
          </div>
        </form>
        
        {% require_js %}
        <script>
          (function() {
            // Variables
            var blogTagSelect = document.querySelector('#tag-select');

            // Functions
            blogTagSelect.addEventListener('change', function() {
              if (blogTagSelect.value) {
                window.location = blogTagSelect.value;
              }
              return false;
            });
          })();
        </script>
        {% end_require_js %}
      </div>      
      <div class="cards main">
          {% for content in contents %}
              {% if loop.index > 1 %}
                  <a href="{{content.absolute_url}}" class="card">
                      {% if not simple_list_page %}
                          {% if content.post_list_summary_featured_image %}
                              <div>
                                  <img src="{{ content.post_list_summary_featured_image }}" width="400px" alt="{{ content.featured_image_alt_text | escape }}">
                              </div>
                          {% endif %}
                          <div class="card-body">
                              <div class="topic-wrap">
                                  <p id="hubspot-topic_data"> Blog |
                                  {% for topic in content.topic_list %}
                                      <span class="topic-link" data-attr="{{ topic.name|replace(" ", "-")|replace("&", "-") }}">{{ topic.name }}</span>{% if not loop.last %}{% endif %}
                                  {% endfor %}
                                  </p>
                              </div>
                              <div class="card-title">
                                  <h3>{{ content.name }}</h3>
                              </div>
                              <div class="card-description">
                                <p>
                                  {{ content.post_list_content|safe|striptags|truncate(120, True, '.') }}
                                </p>
                              </div>
                              <div class="card-cta">
                                  {% if content_group.show_summary_in_listing %}
                                      <span class="more-link" href="{{ content.absolute_url }}">Read More <i class="fas fa-arrow-right"></i></span>
                                  {% endif %}
                              </div>
                          </div>
                      {% else %}
                      {% endif %}
                  </a>
              {% endif %}
          {% endfor %}
      </div>
      <div class="pagination">
        {% module "module_176459607075994" path="@hubspot/pagination", label="pagination.module" %}
      </div>
    </div>
    <div class="cta">
      {% module "module_1764596122520101" path="/HotWax_2021/Custom Modules/Old Page Modules/Text CTA Module", label="Text CTA Module" %}
    </div>
  </div>
</main>
{% endblock body %}
{% require_js %}
<script>
  // Set the sidebar sticky position with the header height
  const header = document.querySelector('header.header');
  const sidebar = document.querySelector('.sidebar__inner');
  const isHeaderFixed = header.dataset.position == 'fixed' ? true : false;
  if(isHeaderFixed) {
    sidebar.style.top = `${header.offsetHeight}px`;
  }
</script>
{% end_require_js %}
