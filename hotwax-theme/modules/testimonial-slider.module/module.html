{# ----- Module Styles ----- #}

{% require_css %}
<style>
  {% scope_css %}
    .slick-slide {
      background-color: rgba({{ module.styles.bg_color.color | convert_rgb }}, calc({{ module.styles.bg_color.opacity }} / 100));
      {{ module.styles.spacing.desktop.css }};
      border-radius: {{ module.styles.border_radius }}px;
      box-shadow: 0px 8px 24px rgba(0, 0, 0, 0.1);
    }
    .testimonial-slider__navigation path {
      fill: rgba({{ module.styles.arrow_color.color | convert_rgb }}, {{ module.styles.arrow_color.opacity * 0.01 }});
    }
  
    .testimonial-slider .star-rating path {
      fill: rgba({{ module.styles.rating_stars.color | convert_rgb }}, {{ module.styles.rating_stars.opacity * 0.01 }});
    }
  
    .testimonial-slider__icon path {
      fill: rgba({{ module.styles.quotes_color.color | convert_rgb }}, {{ module.styles.quotes_color.opacity * 0.01 }});
    }
  
    {# ---- Tablet Breakpoint ---- #}

    @media (max-width: 992px) {
      .slick-slide {
        {{ module.styles.spacing.tablet.css }};
      }
    }

    {# ---- Mobile Breakpoint ---- #}

    @media (max-width: 765px) {
      .slick-slide {
        {{ module.styles.spacing.mobile.css }};
      }
    }

  {% end_scope_css %}
</style>
{% end_require_css %}

{# ----- END Module Styles ----- #}

{% set arrow_icon = '
<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20" x="0" y="0"
	 viewBox="0 0 443.52 443.52" style="enable-background:new 0 0 443.52 443.52;" xml:space="preserve">
<g>
	<g>
		<path d="M143.492,221.863L336.226,29.129c6.663-6.664,6.663-17.468,0-24.132c-6.665-6.662-17.468-6.662-24.132,0l-204.8,204.8
			c-6.662,6.664-6.662,17.468,0,24.132l204.8,204.8c6.78,6.548,17.584,6.36,24.132-0.42c6.387-6.614,6.387-17.099,0-23.712
			L143.492,221.863z"/>
	</g>
</g>
</svg>
' %}

{% set quotes_icon = '
<svg width="42" height="36" viewBox="0 0 42 36" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M10.4241 0L17.306 5.66763C14.7422 8.3965 12.853 10.9854 11.6386 13.4344C10.4241 15.8134 9.81687 18.4023 9.81687 21.2012L5.86988 16.4781H19.1277V36H0V23.8251C0 19.3469 0.775904 15.2886 2.32771 11.6501C3.94699 7.94169 6.64578 4.05831 10.4241 0ZM33.2964 0L40.1783 5.66763C37.6145 8.3965 35.7253 10.9854 34.5108 13.4344C33.2964 15.8134 32.6892 18.4023 32.6892 21.2012L28.7422 16.4781H42V36H22.8723V23.8251C22.8723 19.3469 23.6482 15.2886 25.2 11.6501C26.8193 7.94169 29.5181 4.05831 33.2964 0Z" fill="#333333"/>
</svg>
' %}

<div class="testimonial-slider" id="{{ name }}">
  <div class="slider">
    <div class="slick-pf px-3 mb-0">
      {% for item in module.slides %}
        <div class="slick-slide mt-3 mb-4 mx-3 {{ module.styles.text_alignment.desktop }} {{ module.styles.text_alignment.tablet }} {{ module.styles.text_alignment.mobile }}">
          <div class="testimonial-slider__icon mb-2">
            {{ quotes_icon }}
          </div>
          {% inline_rich_text field="text_content" value="{{ item.text_content }}" %}
          <div class="star-rating mt-3 d-flex">
            {% if item.star_rating == '1' %}
            <span class="star-solid">{% icon name="Star" style="SOLID" unicode="f006" %}</span>
            <span class="star-outline">{% icon name="Star" unicode="f005" %}</span>
            <span class="star-outline">{% icon name="Star" unicode="f005" %}</span>
            <span class="star-outline">{% icon name="Star" unicode="f005" %}</span>
            <span class="star-outline">{% icon name="Star" unicode="f005" %}</span>
            {% endif %}
            {% if item.star_rating == '2' %}
            <span class="star-solid">{% icon name="Star" style="SOLID" unicode="f006" %}</span>
            <span class="star-solid">{% icon name="Star" style="SOLID" unicode="f006" %}</span>
            <span class="star-outline">{% icon name="Star" unicode="f005" %}</span>
            <span class="star-outline">{% icon name="Star" unicode="f005" %}</span>
            <span class="star-outline">{% icon name="Star" unicode="f005" %}</span>
            {% endif %}
            {% if item.star_rating == '3' %}
            <span class="star-solid">{% icon name="Star" style="SOLID" unicode="f006" %}</span>
            <span class="star-solid">{% icon name="Star" style="SOLID" unicode="f006" %}</span>
            <span class="star-solid">{% icon name="Star" style="SOLID" unicode="f006" %}</span>
            <span class="star-outline">{% icon name="Star" unicode="f005" %}</span>
            <span class="star-outline">{% icon name="Star" unicode="f005" %}</span>
            {% endif %}
            {% if item.star_rating == '4' %}
            <span class="star-solid">{% icon name="Star" style="SOLID" unicode="f006" %}</span>
            <span class="star-solid">{% icon name="Star" style="SOLID" unicode="f006" %}</span>
            <span class="star-solid">{% icon name="Star" style="SOLID" unicode="f006" %}</span>
            <span class="star-solid">{% icon name="Star" style="SOLID" unicode="f006" %}</span>
            <span class="star-outline">{% icon name="Star" unicode="f005" %}</span>
            {% endif %}
            {% if item.star_rating == '5' %}
            <span class="star-solid">{% icon name="Star" style="SOLID" unicode="f006" %}</span>
            <span class="star-solid">{% icon name="Star" style="SOLID" unicode="f006" %}</span>
            <span class="star-solid">{% icon name="Star" style="SOLID" unicode="f006" %}</span>
            <span class="star-solid">{% icon name="Star" style="SOLID" unicode="f006" %}</span>
            <span class="star-solid">{% icon name="Star" style="SOLID" unicode="f006" %}</span>
            {% endif %}
          </div>
          <div class="author-information d-flex align-items-center mx-0 mt-2">
            {% if item.author.photo.src %}
               {% set loadingAttr = item.author.photo.loading != 'disabled' ? 'loading="{{ item.author.photo.loading }}"' : '' %}
              <img class="mr-2" src="{{ item.author.photo.src }}" alt="{{ item.author.photo.alt }}" {{ loadingAttr }} width="40" height="40">
            {% endif %}
              {% inline_rich_text field="author.text_content" value="{{ item.author.text_content }}" %}
          </div>
        </div>
      {% endfor %}
    </div>
    <div class="testimonial-slider__navigation d-flex justify-content-between">
      <a class="testimonial-slider-prev" role="button" data-slide="prev">{{ arrow_icon }}</a>
      <a class="testimonial-slider-next" role="button" data-slide="next">{{ arrow_icon }}</a>
    </div>
  </div>
</div>
{{ require_css(get_asset_url('../../vendor/slick-slider/slick.css')) }}
{{ require_css(get_asset_url('../../vendor/slick-slider/slick-theme.min.css')) }}
{{ require_js(get_asset_url('../../vendor/slick-slider/slick.min.js')) }} 
{% require_js %}
<script>
$(window).on('load', function(){
  $('#{{name}} .slick-pf').slick({
  slidesToScroll: 1,
  slidesToShow: {{ module.slider_opts.slides.desktop }},
  arrows: false,
  autoplay: {{ module.slider_opts.autoplay }},
  gutter: 20,
  dots: false,
  adaptiveHeight: false,
  pauseOnHover:false,
  autoplaySpeed: {{ module.slider_opts.autoplay_speed }},
  draggable: true,
  responsive: [
      {
        breakpoint: 992,
        settings: {
          arrows: false,
          centerMode: false,
          slidesToShow: {{ module.slider_opts.slides.tablet }}
        }
      },
      {
        breakpoint: 480,
        settings: {
          arrows: false,
          centerMode: false,
          slidesToShow: {{ module.slider_opts.slides.mobile }}
        }
      }
    ]
  });
  $('#{{ name }} .testimonial-slider-prev').click(function() {
    $('#{{ name }} .slick-pf').slick('slickPrev');
  });

  $('#{{ name }} .testimonial-slider-next').click(function() {
    $('#{{ name }} .slick-pf').slick('slickNext');
  });
});
</script>
{% end_require_js %}
