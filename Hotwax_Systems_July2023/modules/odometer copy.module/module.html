<div class="mdl_wrap">
  <div class="prs_items row ">
    {% for item in module.Odometer %}
    <div class="prs_item  section odometer-section col-12 col-md-3">
      <div class="prospect_milestone">
        <div class="prs_inr">
          <div class="prospect_milestone_background">
            <div class="figure_wrap hexagon">
              {{ module.item_background_svg }}
            </div>
          </div>
          <div class="prospect_milestone_content">
            <div class="odometer" data-odometer-value="{{ item.odometer }}" style="color: {{item.value_color.color}}; font-size:{{module.font_size_of_value}}px" >0</div>
            <h6 class="prospect_milestone_title" style="color:{{item.title_color.color}}; font-size:{{module.font_size_of_title}}px">{{ item.heading }}</h6>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>


{% require_js %}
<script>
 const sectionElements = document.querySelectorAll('.odometer-section');
const odometerElements = document.querySelectorAll('.odometer');
const animationDuration = 2000; // Animation duration in milliseconds

const odometers = [];

for (let i = 0; i < odometerElements.length; i++) {
  const odometer = new Odometer({
    el: odometerElements[i],
    value: 0,
    duration: animationDuration,
    format: '(,ddd)', // Optional: Customize the number format, e.g., 1,000
  });
  odometers.push(odometer);
}

const targetNumbers = Array.from(odometerElements).map(odometerElement => parseInt(odometerElement.dataset.odometerValue, 10));

function animateOdometers(entries, observer) {
  entries.forEach((entry, index) => {
    if (entry.isIntersecting) {
      odometers[index].update(targetNumbers[index]);
      observer.unobserve(entry.target);
    }
  });
}

const observer = new IntersectionObserver(animateOdometers, { threshold: 0.2 });

sectionElements.forEach(section => {
  observer.observe(section);
});

// Additional code to animate the odometers on page scroll
function animateOnScroll() {
  for (let i = 0; i < sectionElements.length; i++) {
    const rect = sectionElements[i].getBoundingClientRect();
    if (rect.top <= window.innerHeight * 0.8 && rect.bottom >= 0) {
      odometers[i].update(targetNumbers[i]);
    }
  }
}

// Trigger odometer animation on page scroll
document.addEventListener('scroll', animateOnScroll);


</script>
{% end_require_js %}

{% require_css %}
<style>
/* .mdl_wrap .prospect_milestone_content .odometer{
  color : 
} */
</style>
{% end_require_css %}